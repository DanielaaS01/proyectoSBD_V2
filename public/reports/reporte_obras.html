<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reporte de Obras de Museo</title>
    <link rel="stylesheet" href="../css/reporte_obras.css">
</head>
<body>
    <!-- Contenido principal -->
    <main>
        <!-- Cabecera -->
        <header class="header">
            <h1 class="page-title">Reporte de Obras</h1>
        </header>
        
        <!-- Sección de filtros -->
        <section class="filters-section">
            <h2 class="section-title">
                <svg class="section-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                    <path d="M10 18h4v-2h-4v2zM3 6v2h18V6H3zm3 7h12v-2H6v2z"/>
                </svg>
                Filtros de Búsqueda
            </h2>
            
            <div class="filters-container">
                <div class="filter-group">
                    <label for="museoFilter" class="filter-label">Museo</label>
                    <select id="museoFilter" class="filter-control">
                        <!-- Generar dinamicamente -->
                    </select>
                </div>
                
                <div class="filter-group">
                    <label for="tipoObraFilter" class="filter-label">Tipo de Obra</label>
                    <select id="tipoObraFilter" class="filter-control">
                        <option value="" selected>Todos los tipos</option>
                        <option value="P">Pintura</option>
                        <option value="E">Escultura</option>
                    </select>
                </div>
                
                <button id="aplicarFiltros" class="filter-btn">
                    <svg class="btn-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="white">
                        <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>
                    </svg>
                    Aplicar Filtros
                </button>
            </div>
        </section>
        
        <!-- Sección de resultados -->
        <section class="results-section">
            <!-- Lista de obras -->
            <div class="artwork-list-container">
                <div class="list-header">
                    <h3 class="list-title">
                        Obras Disponibles
                    </h3>
                    <div id="artworkCount" class="artwork-count">Mostrando x obras</div> <!-- Generar dinamicamente -->
                </div>
                
                <div id="artworkList" class="artwork-list">
                    <!-- Las obras se cargarán dinámicamente aquí -->
                </div>
            </div>
            
            <!-- Detalle de la obra -->
            <div class="artwork-detail-container">
                <div id="noArtworkSelected" class="no-artwork-selected">
                    <svg class="no-artwork-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                        <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm-5-9h10v2H7z"/>
                    </svg>
                    <h3 class="no-artwork-title">Ninguna obra seleccionada</h3>
                    <p class="no-artwork-text">Seleccione una obra de la lista para ver su información detallada</p>
                </div>
                
                <div id="artworkDetail" style="display: none;">
                    <div class="detail-header">
                        <div>
                            <h3 id="detailTitle" class="detail-title">Nombre de la Obra</h3>
                            <!-- Etiqueta OBRA DESTACADA -->
                            <div id="destacadaBadge" class="destacada-badge" style="display:none;">
                                <svg class="destacada-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                                    <path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"/>
                                </svg>
                                OBRA DESTACADA
                            </div>
                        </div>
                        <div class="detail-actions">
                            <button id="printReport" class="action-btn" title="Imprimir reporte">
                                <svg class="action-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                                    <path d="M19 8H5c-1.66 0-3 1.34-3 3v6h4v4h12v-4h4v-6c0-1.66-1.34-3-3-3zm-3 11H8v-5h8v5zm3-7c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1zm-1-9H6v4h12V3z"/>
                                </svg>
                            </button>
                            <button id="exportPDF" class="action-btn" title="Exportar a PDF">
                                <svg class="action-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                                    <path d="M20 2H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-8.5 7.5c0 .83-.67 1.5-1.5 1.5H9v2H7.5V7H10c.83 0 1.5.67 1.5 1.5v1zm5 2c0 .83-.67 1.5-1.5 1.5h-2.5V7H15c.83 0 1.5.67 1.5 1.5v3zm4-3H19v1h1.5V11H19v2h-1.5V7h3v1.5zM9 9.5h1v-1H9v1zM4 6H2v14c0 1.1.9 2 2 2h14v-2H4V6zm10 5.5h1v-3h-1v3z"/>
                                </svg>
                            </button>
                        </div>
                    </div>
                    
                    <div class="detail-content">
                        <div class="artwork-info">
                            <!-- Información general -->
                            <div class="info-section">
                                <h4 class="info-title">
                                    <svg class="info-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                                        <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"/>
                                    </svg>
                                    Información General
                                </h4>
                                <div class="info-grid">
                                    <div class="info-item">
                                        <div class="info-label">Nombre de la Obra</div>
                                        <div id="nombreObra" class="info-value">-</div>
                                    </div>
                                    <div class="info-item">
                                        <div class="info-label">Tipo de Obra</div>
                                        <div id="tipoObra" class="info-value">-</div>
                                    </div>
                                    <div class="info-item">
                                        <div class="info-label">Colección</div>
                                        <div id="coleccion" class="info-value">-</div>
                                    </div>
                                    <div class="info-item">
                                        <div class="info-label">Periodo</div>
                                        <div id="periodo" class="info-value">-</div>
                                    </div>
                                    <div class="info-item">
                                        <div class="info-label">Dimensiones</div>
                                        <div id="dimensiones" class="info-value">-</div>
                                    </div>
                                    <div class="info-item">
                                        <div class="info-label">Ubicación Actual</div>
                                        <div id="ubicacion" class="info-value">-</div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Estilos y características -->
                            <div class="info-section">
                                <h4 class="info-title">
                                    <svg class="info-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                                        <path d="M12 3c-4.97 0-9 4.03-9 9s4.03 9 9 9c.83 0 1.5-.67 1.5-1.5 0-.39-.15-.74-.39-1.01-.23-.26-.38-.61-.38-.99 0-.83.67-1.5 1.5-1.5H16c2.76 0 5-2.24 5-5 0-4.42-4.03-8-9-8zm-5.5 9c-.83 0-1.5-.67-1.5-1.5S5.67 9 6.5 9 8 9.67 8 10.5 7.33 12 6.5 12zm3-4C8.67 8 8 7.33 8 6.5S8.67 5 9.5 5s1.5.67 1.5 1.5S10.33 8 9.5 8zm5 0c-.83 0-1.5-.67-1.5-1.5S13.67 5 14.5 5s1.5.67 1.5 1.5S15.33 8 14.5 8zm3 4c-.83 0-1.5-.67-1.5-1.5S16.67 9 17.5 9s1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"/>
                                    </svg>
                                    Estilos y Características
                                </h4>
                                <div class="info-item">
                                    <div class="info-label">Estilos</div>
                                    <div id="estilos" class="info-value"></div>
                                </div>
                                <div class="info-item">
                                    <div class="info-label">Características, Materiales y Técnicas</div>
                                    <div id="materiales" class="info-value">-</div>
                                </div>
                            </div>
                            
                            <!-- Artistas -->
                            <div class="info-section">
                                <h4 class="info-title">
                                    <svg class="info-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                                        <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
                                    </svg>
                                    Artistas
                                </h4>
                                <div id="artistasContainer">
                                    <!-- Los artistas se cargarán dinámicamente aquí -->
                                </div>
                            </div>
                            
                            <!-- Adquisición -->
                            <div class="info-section">
                                <h4 class="info-title">
                                    <svg class="info-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                                        <path d="M20 4H4c-1.11 0-1.99.89-1.99 2L2 18c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V6c0-1.11-.89-2-2-2zm0 14H4v-6h16v6zm0-10H4V6h16v2z"/>
                                    </svg>
                                    Información de Adquisición
                                </h4>
                                <div class="info-item">
                                    <div class="info-label">Fecha de Adquisición</div>
                                    <div id="fechaAdquisicion" class="info-value">-</div>
                                </div>
                                <div id="badgeAdquisicion" class="acquisition-badge">
                                    <!-- El badge se cargará dinámicamente aquí -->
                                </div>
                            </div>
                            
                            <!-- NUEVA SECCIÓN: Registros de movilidad de la obra -->
                            <div class="info-section">
                                <h4 class="info-title">
                                    <svg class="info-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                                        <path d="M16 13h-1V9c0-2.21-1.79-4-4-4s-4 1.79-4 4v4H6c-1.1 0-2 .9-2 2v5c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2v-5c0-1.1-.9-2-2-2zm-6-4c0-1.1.9-2 2-2s2 .9 2 2v4H10V9zm6 11H6v-5h10v5zm2-7H4v-2c0-1.1.9-2 2-2h12c1.1 0 2 .9 2 2v2z"/>
                                    </svg>
                                    Registros de movilidad de la obra
                                </h4>
                                <div id="movilidadContainer" class="movilidad-list">
                                    <!-- Los registros de movilidad se cargarán dinámicamente aquí -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>
    
    <!-- Notificación -->
    <div id="notification" class="notification">
        <svg id="notificationIcon" class="notification-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
        </svg>
        <span id="notificationMessage" class="notification-message">Operación completada con éxito</span>
        <span class="notification-close" id="notificationClose">×</span>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="../js/reporte_obras.js"></script>
</body>
</html>